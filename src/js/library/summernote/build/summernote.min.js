!function(t){"use strict";var e,n,o,a,i,l,r,s,d,c,u,f,b,h,v,g,m,p,y,_,k,$,C,x,w,F,A,S,E=navigator.appVersion.indexOf("Mac")>-1,T=navigator.userAgent.indexOf("MSIE")>-1,N={eq:function(t){return function(e){return t===e}},eq2:function(t,e){return t===e},fail:function(){return!1},not:function(t){return function(){return!t.apply(t,arguments)}},self:function(t){return t}},B=(e=function(t){return t[0]},n=function(t){return t[t.length-1]},o=function(t){return t.slice(1)},a=function(t,a){return 0===t.length?[]:o(t).reduce(function(t,e){var o=n(t);return a(n(o),e)?o[o.length]=e:t[t.length]=[e],t},[[e(t)]])},{head:e,last:n,initial:function(t){return t.slice(0,t.length-1)},tail:o,sum:function(t,e){return e=e||N.self,t.reduce(function(t,n){return t+e(n)},0)},from:function(t){for(var e=[],n=-1,o=t.length;++n<o;)e[n]=t[n];return e},compact:function(t){for(var e=[],n=0,o=t.length;n<o;n++)t[n]&&e.push(t[n]);return e},clusterBy:a}),H=(i=function(t){return function(e){return e&&e.nodeName===t}},l=function(t){return t&&/^P|^LI|^H[1-7]/.test(t.nodeName)},r=function(t){return t&&/^UL|^OL/.test(t.nodeName)},s=function(e){return e&&t(e).hasClass("note-editable")},d=function(e){return e&&t(e).hasClass("note-control-sizing")},c=function(t,e){for(;t;){if(e(t))return t;t=t.parentNode}return null},u=function(t,e){e=e||N.fail;var n=[];return c(t,function(t){return n.push(t),e(t)}),n},f=function(e,n){for(var o=u(e),a=n;a;a=a.parentNode)if(t.inArray(a,o)>-1)return a;return null},b=function(t,e){var n=[],o=!1,a=!1,i=function(l){if(l){if(l===t&&(o=!0),o&&!a&&n.push(l),l===e){a=!0;return}for(var r=0,s=l.childNodes.length;r<s;r++)i(l.childNodes[r])}};return i(f(t,e)),n},h=function(t,e){e=e||N.fail;for(var n=[];t&&(n.push(t),!e(t));)t=t.previousSibling;return n},v=function(t,e){e=e||N.fail;for(var n=[];t&&(n.push(t),!e(t));)t=t.nextSibling;return n},g=function(t,e){var n=e.nextSibling,o=e.parentNode;return n?o.insertBefore(t,n):o.appendChild(t),t},m=function(e,n){return t.each(n,function(t,n){e.appendChild(n)}),e},p=i("#text"),y=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},_=function(e,n){var o=B.initial(u(n,N.eq(e)));return t.map(o,y).reverse()},k=function(t,e){for(var n=t,o=0,a=e.length;o<a;o++)n=n.childNodes[e[o]];return n},$=function(t,e){if(0===e)return t;if(e>=(p(n=t)?n.nodeValue.length:n.childNodes.length))return t.nextSibling;if(p(t))return t.splitText(e);var n,o=t.childNodes[e];return t=g(t.cloneNode(!1),t),m(t,v(o))},C=function(t,e,n){var o=u(e,N.eq(t));return 1===o.length?$(e,n):o.reduce(function(t,o){var a=o.cloneNode(!1);return g(a,o),t===e&&(t=$(t,n)),m(a,v(t)),a})},x=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){for(var o=[],a=0,i=t.childNodes.length;a<i;a++)o.push(t.childNodes[a]);for(var a=0,i=o.length;a<i;a++)n.insertBefore(o[a],t)}n.removeChild(t)}},{isText:p,isPara:l,isList:r,isEditable:s,isControlSizing:d,isAnchor:i("A"),isDiv:i("DIV"),isSpan:i("SPAN"),isB:i("B"),isU:i("U"),isS:i("S"),isI:i("I"),isImg:i("IMG"),ancestor:c,listAncestor:u,listNext:v,listPrev:h,commonAncestor:f,listBetween:b,insertAfter:g,position:y,makeOffsetPath:_,fromOffsetPath:k,split:C,remove:x}),z=(w=!!document.createRange,F=function(t,e){var n,o,a=t.parentElement(),i=document.body.createTextRange(),l=B.from(a.childNodes);for(n=0;n<l.length;n++)if(!H.isText(l[n])){if(i.moveToElementText(l[n]),i.compareEndPoints("StartToStart",t)>=0)break;o=l[n]}if(0!=n&&H.isText(l[n-1])){var r=document.body.createTextRange(),s=null;r.moveToElementText(o||a),r.collapse(!o),s=o?o.nextSibling:a.firstChild;var d=t.duplicate();d.setEndPoint("StartToStart",r);for(var c=d.text.replace(/[\r\n]/g,"").length;c>s.nodeValue.length&&s.nextSibling;)c-=s.nodeValue.length,s=s.nextSibling;s.nodeValue,e&&s.nextSibling&&H.isText(s.nextSibling)&&c==s.nodeValue.length&&(c-=s.nodeValue.length,s=s.nextSibling),a=s,n=c}return{cont:a,offset:n}},A=function(t){var e=function(t,n){var o,a;if(H.isText(t)){var i=H.listPrev(t,N.not(H.isText)),l=B.last(i).previousSibling;o=l||t.parentNode,n+=B.sum(B.tail(i),H.length),a=!l}else{if(o=t.childNodes[n]||t,H.isText(o))return e(o,n);n=0,a=!1}return{cont:o,collapseToStart:a,offset:n}},n=document.body.createTextRange(),o=e(t.cont,t.offset);return n.moveToElementText(o.cont),n.collapse(o.collapseToStart),n.moveStart("character",o.offset),n},S=function(e,n,o,a){this.sc=e,this.so=n,this.ec=o,this.eo=a;var i=function(){if(w){var t=document.createRange();return t.setStart(e,n),t.setEnd(o,a),t}var i=A({cont:e,offset:n});return i.setEndPoint("EndToEnd",A({cont:o,offset:a})),i};this.select=function(){var t=i();if(w){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select()},this.listPara=function(){var n=H.listBetween(e,o),a=B.compact(t.map(n,function(t){return H.ancestor(t,H.isPara)}));return t.map(B.clusterBy(a,N.eq2),B.head)};var l=function(t){return function(){var n=H.ancestor(e,t);return n&&n===H.ancestor(o,t)}};this.isOnEditable=l(H.isEditable),this.isOnList=l(H.isList),this.isOnAnchor=l(H.isAnchor),this.isCollapsed=function(){return e===o&&n===a},this.insertNode=function(t){var e=i();w?e.insertNode(t):e.pasteHTML(t.outerHTML)},this.toString=function(){var t=i();return w?t.toString():t.text},this.bookmark=function(t){return{s:{path:H.makeOffsetPath(t,e),offset:n},e:{path:H.makeOffsetPath(t,o),offset:a}}}},{create:function(t,e,n,o){if(0===arguments.length){if(w){var a=document.getSelection().getRangeAt(0);t=a.startContainer,e=a.startOffset,n=a.endContainer,o=a.endOffset}else{var i=document.selection.createRange(),l=i.duplicate();l.collapse(!1);var r=i;r.collapse(!0);var s=F(r,!0),d=F(l,!1);t=s.cont,e=s.offset,n=d.cont,o=d.offset}}else 2===arguments.length&&(n=t,o=e);return new S(t,e,n,o)},createFromBookmark:function(t,e){var n=H.fromOffsetPath(t,e.s.path),o=e.s.offset,a=H.fromOffsetPath(t,e.e.path),i=e.e.offset;return new S(n,o,a,i)}}),L=function(){this.stylePara=function(e,n){var o=e.listPara();t.each(o,function(e,o){t.each(n,function(t,e){o.style[t]=e})})},this.current=function(e,n){var o=t(H.isText(e.sc)?e.sc.parentNode:e.sc).css(["font-size","text-align","list-style-type","line-height"])||{};if(o["font-size"]=parseInt(o["font-size"]),o["font-bold"]=document.queryCommandState("bold")?"bold":"normal",o["font-italic"]=document.queryCommandState("italic")?"italic":"normal",o["font-underline"]=document.queryCommandState("underline")?"underline":"normal",e.isOnList()){var a=t.inArray(o["list-style-type"],["circle","disc","disc-leading-zero","square"])>-1;o["list-style"]=a?"unordered":"ordered"}else o["list-style"]="none";var i=H.ancestor(e.sc,H.isPara);if(i&&i.style["line-height"])o["line-height"]=i.style.lineHeight;else{var l=parseInt(o["line-height"])/parseInt(o["font-size"]);o["line-height"]=l.toFixed(1)}return o.image=H.isImg(n)&&n,o.anchor=e.isOnAnchor()&&H.ancestor(e.sc,H.isAnchor),o.aAncestor=H.listAncestor(e.sc,H.isEditable),o}},D=function(){var t=[],e=[],n=function(t){var e=t[0],n=z.create();return{contents:t.html(),bookmark:n.bookmark(e),scrollTop:t.scrollTop()}},o=function(t,e){t.html(e.contents).scrollTop(e.scrollTop),z.createFromBookmark(t[0],e.bookmark).select()};this.undo=function(a){var i=n(a);0!==t.length&&(o(a,t.pop()),e.push(i))},this.redo=function(a){var i=n(a);0!==e.length&&(o(a,e.pop()),t.push(i))},this.recordUndo=function(o){e=[],t.push(n(o))}},R=function(){var e=new L;this.currentStyle=function(t){var n=z.create();return n.isOnEditable()&&e.current(n,t)},this.tab=function(e){n(e);var o=z.create(),a=Array(e.data("tabsize")+1).join("&nbsp;");o.insertNode(t('<span id="noteTab">'+a+"</span>")[0]);var i=t("#noteTab").removeAttr("id");(o=z.create(i[0],1)).select(),H.remove(i[0])},this.undo=function(t){t.data("NoteHistory").undo(t)},this.redo=function(t){t.data("NoteHistory").redo(t)};for(var n=this.recordUndo=function(t){t.data("NoteHistory").recordUndo(t)},o=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertImage","insertHorizontalRule"],a=0,i=o.length;a<i;a++)this[o[a]]=function(t){return function(e,o){n(e),document.execCommand(t,!1,o)}}(o[a]);this.formatBlock=function(t,e){e=T?"<"+e+">":e,document.execCommand("FormatBlock",!1,e)},this.fontSize=function(t,e){n(t),document.execCommand("fontSize",!1,3),t.find("font[size=3]").removeAttr("size").css("font-size",e+"px")},this.lineHeight=function(t,o){n(t),e.stylePara(z.create(),{lineHeight:o})},this.unlink=function(t){var e=z.create();if(e.isOnAnchor()){n(t);var o=H.ancestor(e.sc,H.isAnchor);(e=z.create(o,0,o,1)).select(),document.execCommand("unlink")}},this.setLinkDialog=function(e,o){var a=z.create();if(a.isOnAnchor()){var i=H.ancestor(a.sc,H.isAnchor);a=z.create(i,0,i,1)}o({range:a,text:a.toString(),url:a.isOnAnchor()?H.ancestor(a.sc,H.isAnchor).href:""},function(o){a.select(),n(e);var i=-1!==o.toLowerCase().indexOf("://")?o:"http://"+o;if(T&&a.isCollapsed()){a.insertNode(t('<A id="linkAnchor">'+o+"</A>")[0]);var l=t("#linkAnchor").removeAttr("id").attr("href",i);(a=z.create(l[0],0,l[0],1)).select()}else document.execCommand("createlink",!1,i)})},this.color=function(t,e){var o=JSON.parse(e);n(t),document.execCommand("foreColor",!1,o.foreColor),document.execCommand("backColor",!1,o.backColor)},this.insertTable=function(e,o){n(e);for(var a,i=o.split("x"),l=i[0],r=i[1],s=[],d=T?"&nbsp;":"<br/>",c=0;c<l;c++)s.push("<td>"+d+"</td>");a=s.join("");for(var u,f=[],b=0;b<r;b++)f.push("<tr>"+a+"</tr>");var h='<table class="table table-bordered">'+(u=f.join(""))+"</table>";z.create().insertNode(t(h)[0])},this.float=function(t,e,o){n(t),o.style.cssFloat=e},this.resize=function(t,e,o){n(t),o.style.width=t.width()*e+"px",o.style.height=""},this.resizeTo=function(t,e){var n=t.y/t.x,o=e.data("ratio");e.css({width:o>n?t.x:t.y/o,height:o>n?t.x*o:t.y})}},U=function(){this.update=function(e,n){var o=function(e,n){e.find(".dropdown-menu li a").each(function(){var e=t(this).attr("data-value")==n;this.className=e?"checked":""})},a=e.find(".note-fontsize");a.find(".note-current-fontsize").html(n["font-size"]),o(a,parseFloat(n["font-size"])),o(e.find(".note-height"),parseFloat(n["line-height"]));var i=function(t,n){e.find(t)[n()?"addClass":"removeClass"]("active")};i('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),i('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),i('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),i('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),i('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),i('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),i('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),i('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),i('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(e,n,o){var a=t(e).closest(".note-color").find(".note-recent-color"),i=JSON.parse(a.attr("data-value"));i[n]=o,a.attr("data-value",JSON.stringify(i)),a.find("i").css("backColor"===n?"background-color":"color",o)},this.updateFullscreen=function(t,e){t.find('button[data-event="fullscreen"]')[e?"addClass":"removeClass"]("active")}},I=function(){var e=function(e,n){var o=t(n),a=o.position(),i=o.height();e.css({display:"block",left:a.left,top:a.top+i})};this.update=function(t,n){var o=t.find(".note-link-popover"),a=t.find(".note-image-popover");n.anchor?(o.find("a").attr("href",n.anchor.href).html(n.anchor.href),e(o,n.anchor)):o.hide(),n.image?e(a,n.image):a.hide()},this.hide=function(t){t.children().hide()}},P=function(){this.update=function(e,n){var o=e.find(".note-control-selection");if(n.image){var a=t(n.image),i=a.position(),l={w:a.width(),h:a.height()};o.css({display:"block",left:i.left,top:i.top,width:l.w,height:l.h}).data("target",n.image);var r=l.w+"x"+l.h;o.find(".note-control-selection-info").text(r)}else o.hide()},this.hide=function(t){t.children().hide()}},O=function(){this.showImageDialog=function(e,n,o){var a=e.find(".note-image-dialog"),i=e.find(".note-dropzone"),l=e.find(".note-image-input");a.on("shown.bs.modal",function(e){i.on("dragenter dragover dragleave",!1),i.on("drop",function(t){n(t),a.modal("hide")}),l.on("change",function(){o(this.files),t(this).val(""),a.modal("hide")})}).on("hidden.bs.modal",function(t){i.off("dragenter dragover dragleave drop"),l.off("change"),a.off("shown.bs.modal hidden.bs.modal")}).modal("show")},this.showLinkDialog=function(t,e,n){var o=t.find(".note-link-dialog"),a=o.find(".note-link-text"),i=o.find(".note-link-url"),l=o.find(".note-link-btn");o.on("shown.bs.modal",function(t){a.html(e.text),i.val(e.url).keyup(function(t){i.val()?l.removeClass("disabled").attr("disabled",!1):l.addClass("disabled").attr("disabled",!0),e.text||a.html(i.val())}).trigger("focus"),l.click(function(t){o.modal("hide"),n(i.val()),t.preventDefault()})}).on("hidden.bs.modal",function(t){i.off("keyup"),l.off("click"),o.off("shown.bs.modal hidden.bs.modal")}).modal("show")},this.showHelpDialog=function(t){t.find(".note-help-dialog").modal("show")}},M=function(){var e=new R,n=new U,o=new I,a=new P,i=new O,l={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLACH:220,RIGHTBRACKET:221},r=function(e){var n=t(e).closest(".note-editor");return{editor:function(){return n},toolbar:function(){return n.find(".note-toolbar")},editable:function(){return n.find(".note-editable")},statusbar:function(){return n.find(".note-statusbar")},popover:function(){return n.find(".note-popover")},handle:function(){return n.find(".note-handle")},dialog:function(){return n.find(".note-dialog")}}},s=function(t){var n=E?t.metaKey:t.ctrlKey,o=t.shiftKey,a=t.keyCode,s=n||o||a===l.TAB?r(t.target):null;if(a===l.TAB&&s.editable().data("tabsize"))e.tab(s.editable());else if(n&&(o&&a===l.Z||a===l.Y))e.redo(s.editable());else if(n&&a===l.Z)e.undo(s.editable());else if(n&&a===l.B)e.bold(s.editable());else if(n&&a===l.I)e.italic(s.editable());else if(n&&a===l.U)e.underline(s.editable());else if(n&&o&&a===l.S)e.strikethrough(s.editable());else if(n&&a===l.BACKSLACH)e.removeFormat(s.editable());else if(n&&a===l.K)e.setLinkDialog(s.editable(),function(t,e){i.showLinkDialog(s.dialog(),t,e)});else if(n&&a===l.SLASH)i.showHelpDialog(s.dialog());else if(n&&o&&a===l.L)e.justifyLeft(s.editable());else if(n&&o&&a===l.E)e.justifyCenter(s.editable());else if(n&&o&&a===l.R)e.justifyRight(s.editable());else if(n&&o&&a===l.J)e.justifyFull(s.editable());else if(n&&o&&a===l.NUM7)e.insertUnorderedList(s.editable());else if(n&&o&&a===l.NUM8)e.insertOrderedList(s.editable());else if(n&&a===l.LEFTBRACKET)e.outdent(s.editable());else if(n&&a===l.RIGHTBRACKET)e.indent(s.editable());else if(n&&a===l.NUM0)e.formatBlock(s.editable(),"P");else if(n&&l.NUM1<=a&&a<=l.NUM6){var d="H"+String.fromCharCode(a);e.formatBlock(s.editable(),d)}else if(n&&a===l.ENTER)e.insertHorizontalRule(s.editable());else{(a===l.BACKSPACE||a===l.ENTER||a===l.SPACE)&&e.recordUndo(r(t.target).editable());return}t.preventDefault()},d=function(n,o){n.trigger("focus"),t.each(o,function(t,o){var a=new FileReader;a.onload=function(t){e.insertImage(n,t.target.result)},a.readAsDataURL(o)})},c=function(t){var e=t.originalEvent.dataTransfer;if(e&&e.files){var n=r(t.currentTarget||t.target);d(n.editable(),e.files)}t.stopPropagation(),t.preventDefault()},u=function(t){H.isImg(t.target)&&t.preventDefault()},f=function(t){var i=r(t.currentTarget||t.target),l=e.currentStyle(t.target);l&&(n.update(i.toolbar(),l),o.update(i.popover(),l),a.update(i.handle(),l))},b=function(t){var e=r(t.currentTarget||t.target);o.hide(e.popover()),a.hide(e.handle())},h=function(n){if(H.isControlSizing(n.target)){var i,l=r(n.target),s=l.handle(),d=l.popover(),c=l.editable(),u=l.editor(),f=s.find(".note-control-selection").data("target"),b=t(f),h=b.offset(),v=t(document).scrollTop();u.on("mousemove",function(t){i={x:t.clientX-h.left,y:t.clientY-(h.top-v)},e.resizeTo(i,b),a.update(s,{image:f}),o.update(d,{image:f})}).on("mouseup",function(){u.off("mousemove").off("mouseup")}),b.data("ratio")||b.data("ratio",b.height()/b.width()),e.recordUndo(c),n.stopPropagation(),n.preventDefault()}},v=function(e){t(e.target).closest("[data-event]").length>0&&e.preventDefault()},g=function(o){var a=t(o.target).closest("[data-event]");if(a.length>0){var l,s=a.attr("data-event"),u=a.attr("data-value"),b=r(o.target),h=b.dialog(),v=b.editable();if(-1!==t.inArray(s,["resize","float"])&&(l=b.handle().find(".note-control-selection").data("target")),e[s]&&(v.trigger("focus"),e[s](v,u,l)),-1!==t.inArray(s,["backColor","foreColor"]))n.updateRecentColor(a[0],s,u);else if("showLinkDialog"===s)e.setLinkDialog(v,function(t,e){i.showLinkDialog(h,t,e)});else if("showImageDialog"===s)i.showImageDialog(h,c,function(t){d(v,t)});else if("showHelpDialog"===s)i.showHelpDialog(h);else if("fullscreen"===s){var g=b.editor();g.toggleClass("fullscreen");var m=b.toolbar(),p=function(){var e=t(window).height()-m.outerHeight();v.css("height",e)},y=g.hasClass("fullscreen");y?(v.data("orgHeight",v.css("height")),t(window).resize(p).trigger("resize")):(v.css("height",v.data("orgHeight")),t(window).off("resize")),n.updateFullscreen(m,y)}f(o)}},m=function(e){var n=t(document),o=r(e.target).editable(),a=o.offset().top-n.scrollTop(),i=function(t){o.height(t.clientY-(a+24))},l=function(){n.unbind("mousemove",i).unbind("mouseup",l)};n.mousemove(i).mouseup(l),e.stopPropagation(),e.preventDefault()},p=function(e){var n,o=t(e.target.parentNode),a=o.next(),i=o.find(".note-dimension-picker-mousecatcher"),l=o.find(".note-dimension-picker-highlighted"),r=o.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var s=t(e.target).offset();n={x:e.pageX-s.left,y:e.pageY-s.top}}else n={x:e.offsetX,y:e.offsetY};var d={c:Math.ceil(n.x/18)||1,r:Math.ceil(n.y/18)||1};l.css({width:d.c+"em",height:d.r+"em"}),i.attr("data-value",d.c+"x"+d.r),3<d.c&&d.c<10&&r.css({width:d.c+1+"em"}),3<d.r&&d.r<10&&r.css({height:d.r+1+"em"}),a.html(d.c+" x "+d.r)};this.attach=function(t,e){t.editable.on("keydown",s),t.editable.on("mousedown",u),t.editable.on("keyup mouseup",f),t.editable.on("scroll",b),t.editable.on("dragenter dragover dragleave",!1),t.editable.on("drop",c),t.handle.on("mousedown",h),t.toolbar.on("click",g),t.popover.on("click",g),t.toolbar.on("mousedown",v),t.popover.on("mousedown",v),t.statusbar.on("mousedown",m),t.toolbar.find(".note-dimension-picker-mousecatcher").on("mousemove",p),e.onenter&&t.editable.keypress(function(t){t.keyCode===l.ENTER&&e.onenter(t)}),e.onfocus&&t.editable.focus(e.onfocus),e.onblur&&t.editable.blur(e.onblur),e.onkeyup&&t.editable.keyup(e.onkeyup),e.onkeydown&&t.editable.keydown(e.onkeydown)},this.dettach=function(t){t.editable.off(),t.toolbar.off(),t.handle.off(),t.popover.off()}},j=new function(){var e={picture:'<button type="button" class="btn btn-default btn-sm btn-small" title="Picture" data-event="showImageDialog" tabindex="-1"><i class="icon-picture"></i></button>',link:'<button type="button" class="btn btn-default btn-sm btn-small" title="Link" data-event="showLinkDialog" data-shortcut="Ctrl+K" data-mac-shortcut="⌘+K" tabindex="-1"><i class="icon-link"></i></button>',table:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" tooltip="Table" flow="down" data-toggle="dropdown" tabindex="-1"><i class="icon-table"></i> <span class="caret"></span></button><ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>',style:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" tooltip="Style" flow="down" title="" data-toggle="dropdown" tabindex="-1"><i class="icon-magic"></i> <span class="caret"></span></button><ul class="dropdown-menu"><li><a data-event="formatBlock" data-value="p">Normal</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>Quote</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">Code</a></li><li><a data-event="formatBlock" data-value="h1"><h1>Header 1</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>Header 2</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>Header 3</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>Header 4</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>Header 5</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>Header 6</h6></a></li></ul>',fontsize:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" tooltip="Font Size" flow="down"  tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="icon-ok"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="icon-ok"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="icon-ok"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="icon-ok"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="icon-ok"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="icon-ok"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="icon-ok"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="icon-ok"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="icon-ok"></i> 36</a></li></ul>',color:'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" tooltip="Recent Color" flow="down" title="" data-event="color" data-value=\'{"foreColor":"black","backColor":"yellow"}\' tabindex="-1"><i class="icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" tooltip="More Color" flow="down" data-toggle="dropdown" tabindex="-1"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">BackColor</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">FontColor</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',bold:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="Bold Ctrl/Cmd + B" flow="down" title="" data-shortcut="" data-event="bold" tabindex="-1"><i class="icon-bold"></i></button>',italic:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="Italic Ctrl/Cmd + I" flow="down" data-shortcut="" data-event="italic" tabindex="-1"><i class="icon-italic"></i></button>',underline:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="Underline Ctrl/Cmd + U"  flow="down" title="" data-shortcut="" data-event="underline" tabindex="-1"><i class="icon-underline"></i></button>',clear:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="{Remove Font Style Ctrl/Cmd+\\"  flow="down"  data-shortcut="" data-event="removeFormat" tabindex="-1"><i class="icon-eraser"></i></button>',ul:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="Unordered list Ctrl/Cmd+Shift+8" flow="down" data-event="insertUnorderedList" tabindex="-1"><i class="icon-list-ul"></i></button>',ol:'<button type="button" class="btn btn-default btn-sm btn-small" tooltip="Ordered list Ctrl/Cmd+Shift+7" flow="down" data-event="insertOrderedList" tabindex="-1"><i class="icon-list-ol"></i></button>',paragraph:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" tooltip="Alignment" flow="down" data-toggle="dropdown" tabindex="-1"><i class="icon-align-left"></i>  <span class="caret"></span></button><ul class="dropdown-menu"><li><div class="note-align btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Align left" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft" tabindex="-1"><i class="icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align center" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="icon-align-center"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align right" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight" tabindex="-1"><i class="icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Justify full" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull" tabindex="-1"><i class="icon-align-justify"></i></button></div></li><li><div class="note-list btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Outdent" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent" tabindex="-1"><i class="icon-indent-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Indent" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent" tabindex="-1"><i class="icon-indent-right"></i></button></li></ul>',height:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="Line Height" tabindex="-1"><i class="icon-text-height"></i>&nbsp; <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="icon-ok"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="icon-ok"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="icon-ok"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="icon-ok"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="icon-ok"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="icon-ok"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="icon-ok"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="icon-ok"></i> 3.0</a></li></ul>',help:'<button type="button" class="btn btn-default btn-sm btn-small" title="Help" data-shortcut="Ctrl+/" data-mac-shortcut="⌘+/" data-event="showHelpDialog" tabindex="-1"><i class="icon-question"></i></button>',fullscreen:'<button type="button" class="btn btn-default btn-sm btn-small" title="Full Screen" data-event="fullscreen" tabindex="-1"><i class="icon-fullscreen"></i></button>'},n=function(e,n){e.find("button").each(function(e,n){var o=t(n),a=o.attr(E?"data-mac-shortcut":"data-shortcut");a&&o.attr("title",function(t,e){return e+" ("+a+")"})}).tooltip({container:"body",placement:n||"top"})},o=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#EFF7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],a=function(e){e.find(".note-color-palette").each(function(){for(var e=t(this),n=e.attr("data-target-event"),a="",i=0,l=o.length;i<l;i++){for(var r=o[i],s="<div>",d=0,c=r.length;d<c;d++){var u=r[d];s+=['<button type="button" class="note-color-btn" style="background-color:',u,';" data-event="',n,'" data-value="',u,'" title="',u,'" data-toggle="button" tabindex="-1"></button>'].join("")}s+="</div>",a+=s}e.html(a)})};this.createLayout=function(o,i,l,r){if(!o.next().hasClass("note-editor")){var s=t('<div class="note-editor"></div>');i>0&&t('<div class="note-statusbar"><div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div></div>').prependTo(s);var d=t('<div id="summernote" class="note-editable" contentEditable="true"></div>').prependTo(s);i&&d.height(i),l&&d.data("tabsize",l),d.html(o.html()),d.data("NoteHistory",new D);for(var c="",u=0,f=r.length;u<f;u++){var b=r[u];c+='<div class="note-'+b[0]+' btn-group">';for(var h=0,v=b[1].length;h<v;h++)c+=e[b[1][h]];c+="</div>"}var g=t(c='<div class="note-toolbar btn-toolbar">'+c+"</div>").prependTo(s);a(g),n(g,"bottom");var m=t('<div class="note-popover"><div class="note-link-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Edit" data-event="showLinkDialog" tabindex="-1"><i class="icon-edit"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Unlink" data-event="unlink" tabindex="-1"><i class="icon-unlink"></i></button></div></div></div><div class="note-image-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-image-content"><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Full" data-event="resize" data-value="1" tabindex="-1"><i class="icon-resize-full"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Half" data-event="resize" data-value="0.5" tabindex="-1">\xbd</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Thrid" data-event="resize" data-value="0.33" tabindex="-1">⅓</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Quarter" data-event="resize" data-value="0.25" tabindex="-1">\xbc</button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Float Left" data-event="float" data-value="left" tabindex="-1"><i class="icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float Right" data-event="float" data-value="right" tabindex="-1"><i class="icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float None" data-event="float" data-value="none" tabindex="-1"><i class="icon-reorder"></i></button></div></div></div></div>').prependTo(s);n(m),t('<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>').prependTo(s),t('<div class="note-dialog"><div class="note-image-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="-1">\xd7</button><h4>Insert Image</h4></div><div class="modal-body"><div class="row-fluid"><div class="note-dropzone span12">Drag an image here</div><div>or if you prefer...</div><input class="note-image-input" type="file" class="note-link-url" type="text" /></div></div></div></div></div><div class="note-link-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="-1">\xd7</button><h4>Edit Link</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>Text to display</label><span class="note-link-text form-control input-xlarge uneditable-input" /></div><div class="form-group"><label>To what URL should this link go?</label><input class="note-link-url form-control span12" type="text" /></div></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">Link</button></div></div></div></div><div class="note-help-dialog modal fade" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="modal-background"><a class="modal-close pull-right" data-dismiss="modal" aria-hidden="true" tabindex="-1">Close</a><div class="title">Keyboard shortcuts</div><table class="note-shortcut-layout"><tbody><tr><td><table class="note-shortcut"><thead><tr><th></th><th>Action</th></tr></thead><tbody><tr><td>⌘ + Z</td><td>Undo</td></tr><tr><td>⌘ + ⇧ + Z</td><td>Redo</td></tr><tr><td>⌘ + ]</td><td>Indent</td></tr><tr><td>⌘ + [</td><td>Outdent</td></tr><tr><td>⌘ + K</td><td>Insert Link</td></tr><tr><td>⌘ + ENTER</td><td>Insert Horizontal Rule</td></tr></tbody></table></td><td><table class="note-shortcut"><thead><tr><th></th><th>Text formatting</th></tr></thead><tbody><tr><td>⌘ + B</td><td>Toggle Bold</td></tr><tr><td>⌘ + I</td><td>Toggle Italic</td></tr><tr><td>⌘ + U</td><td>Toggle Underline</td></tr><tr><td>⌘ + ⇧ + S</td><td>Toggle Strike</td></tr><tr><td>⌘ + \\</td><td>Remove Font Style</td></tr></tr></tbody></table></td></tr><tr><td><table class="note-shortcut"><thead><tr><th></th><th>Document Style</th></tr></thead><tbody><tr><td>⌘ + NUM0</td><td>Normal Text</td></tr><tr><td>⌘ + NUM1</td><td>Heading 1</td></tr><tr><td>⌘ + NUM2</td><td>Heading 2</td></tr><tr><td>⌘ + NUM3</td><td>Heading 3</td></tr><tr><td>⌘ + NUM4</td><td>Heading 4</td></tr><tr><td>⌘ + NUM5</td><td>Heading 5</td></tr><tr><td>⌘ + NUM6</td><td>Heading 6</td></tr></tbody></table></td><td><table class="note-shortcut"><thead><tr><th></th><th>Paragraph formatting</th></tr></thead><tbody><tr><td>⌘ + ⇧ + L</td><td>Align Left</td></tr><tr><td>⌘ + ⇧ + E</td><td>Align Center</td></tr><tr><td>⌘ + ⇧ + R</td><td>Align Right</td></tr><tr><td>⌘ + ⇧ + J</td><td>Justify Full</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>Ordered List</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>Unordered List</td></tr></tbody></table></td></tr></tbody></table><p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote v0.3</a> \xb7 <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> \xb7 <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p></div></div></div></div></div>').prependTo(s),s.insertAfter(o),o.hide()}};var i=this.layoutInfoFromHolder=function(t){var e=t.next();if(e.hasClass("note-editor"))return{editor:e,toolbar:e.find(".note-toolbar"),editable:e.find(".note-editable"),statusbar:e.find(".note-statusbar"),popover:e.find(".note-popover"),handle:e.find(".note-handle"),dialog:e.find(".note-dialog")}};this.removeLayout=function(t){var e=i(t);e&&(t.html(e.editable.html()),e.editor.remove(),t.show())}},K=new M;t.fn.extend({summernote:function(e){e=t.extend({toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture"]],["fullscreen",["fullscreen"]],["help",["help"]]]},e),this.each(function(n,o){var a=t(o);j.createLayout(a,e.height,e.tabsize,e.toolbar);var i=j.layoutInfoFromHolder(a);K.attach(i,e)}),this.first()&&e.focus&&j.layoutInfoFromHolder(this.first()).editable.focus(),this.length>0&&e.oninit&&e.oninit()},code:function(e){if(void 0===e){var n=this.first();if(0==n.length)return;var o=j.layoutInfoFromHolder(n);return o&&o.editable?o.editable.html():n.html()}this.each(function(n,o){var a=j.layoutInfoFromHolder(t(o));a&&a.editable&&a.editable.html(e)})},destroy:function(){this.each(function(e,n){var o=t(n),a=j.layoutInfoFromHolder(o);a&&a.editable&&(K.dettach(a),j.removeLayout(o))})},summernoteInner:function(){return{dom:H,list:B,func:N,range:z}}})}(window.jQuery),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";var n,o,a=this.length>>>0,i=!1;for(1<arguments.length&&(o=e,i=!0),n=0;a>n;++n)this.hasOwnProperty(n)&&(i?o=t(o,this[n],n,this):(o=this[n],i=!0));if(!i)throw TypeError("Reduce of empty array with no initial value");return o});
